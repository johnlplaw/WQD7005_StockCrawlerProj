*------------------------------------------------------------*
User:                QR
Date:                May 12, 2019
Time:                00:01:55
Site:                12601940
Platform:            W32_7PRO
Maintenance Release: 9.04.01M3P062415
EM Version:          14.1
* 
*------------------------------------------------------------*
* Training Log
Date:                May 12, 2019
Time:                00:01:51
*------------------------------------------------------------*
10867  proc freq data=EMWS3.Impt2_VariableSet noprint;
10868  table ROLE*LEVEL/out=WORK.Impt2META;
10869  run;
 
NOTE: There were 18 observations read from the data set EMWS3.IMPT2_VARIABLESET.
NOTE: The data set WORK.IMPT2META has 4 observations and 4 variables.
NOTE: PROCEDURE FREQ used (Total process time):
      real time           0.02 seconds
      cpu time            0.01 seconds
 
 
10870  proc print data=WORK.Impt2META label noobs;
10871  var ROLE LEVEL COUNT;
10872  label ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel, NOQUOTE))" LEVEL = "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel, NOQUOTE))" COUNT = "%sysfunc(sasmsg(sashelp.dmine, rpt_count_vlabel, NOQUOTE))";
10873  title9 ' ';
10874  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_varSummary_title  , NOQUOTE))";
10875  run;
 
NOTE: There were 4 observations read from the data set WORK.IMPT2META.
NOTE: The PROCEDURE PRINT printed page 1.
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
10876  title10;
 
10894  data WORK.Impt2_TREEINPUTS;
10895  set WORK.M04RF4WT;
10896  if ROLE ne 'FREQ' then do;
10897  if ((ROLE in('TARGET','REJECTED') and useTree='D') or useTree='N') then delete;
10898  ROLE = 'INPUT';
10899  end;
10900  run;
 
NOTE: There were 17 observations read from the data set WORK.M04RF4WT.
NOTE: The data set WORK.IMPT2_TREEINPUTS has 16 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10901  data WORK.M04RF4WT;
10902  set WORK.M04RF4WT;
10903  if METHOD in("TREE", "TREESURR") then role = 'TARGET';
10904  else if (role = 'REJECTED') then role = 'INPUT';
10905  run;
 
NOTE: There were 17 observations read from the data set WORK.M04RF4WT.
NOTE: The data set WORK.M04RF4WT has 17 observations and 23 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
 
 
10906  *------------------------------------------------------------* ;
10907  * Impt2: DMDBClass Macro ;
10908  *------------------------------------------------------------* ;
10909  %macro DMDBClass;
10910      Category(ASC) REP_updownInd(DESC) Sub_category(ASC) comp_code(ASC)
10911     stock_code(ASC)
10912  %mend DMDBClass;
10913  *------------------------------------------------------------* ;
10914  * Impt2: DMDBVar Macro ;
10915  *------------------------------------------------------------* ;
10916  %macro DMDBVar;
10917      IMP_v_updownpercent LOG_buy LOG_high LOG_lastDone LOG_low LOG_open LOG_sell
10918     LOG_vol buyval chg chgPercent sellval
10919  %mend DMDBVar;
10920  *------------------------------------------------------------*;
10921  * Impt2: Create DMDB;
10922  *------------------------------------------------------------*;
10923  proc dmdb batch data=EMWS3.Trans_TRAIN
10924  dmdbcat=WORK.Impt2_DMDB
10925  classout=WORK.Impt2_DMDBCLASSOUT
10926  varout=WORK.IMPUTE_1W8RAXR_DMDBVAROUT
10927  maxlevel = 513
10928  ;
10929  class %DMDBClass;
10930  var %DMDBVar;
10931  target
10932  REP_updownInd
10933  ;
10934  run;
 
NOTE: Records processed = 1250   Memory used = 511K.
NOTE: View EMWS3.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.10 seconds
      cpu time            0.06 seconds
 
NOTE: There were 1250 observations read from the data set EMWS3.PART_TRAIN.
NOTE: There were 1250 observations read from the data set EMWS3.TRANS_TRAIN.
NOTE: The data set WORK.IMPT2_DMDBCLASSOUT has 87 observations and 9 variables.
NOTE: The data set WORK.IMPUTE_1W8RAXR_DMDBVAROUT has 12 observations and 9 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.13 seconds
      cpu time            0.07 seconds
 
 
10935  quit;
10936  *--- end code ---*;
 
10937  proc sort data=WORK.Impt2_DMDBCLASSOUT;
10938  by NAME;
10939  run;
 
NOTE: There were 87 observations read from the data set WORK.IMPT2_DMDBCLASSOUT.
NOTE: The data set WORK.IMPT2_DMDBCLASSOUT has 87 observations and 9 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
10940  data WORK.Impt2_DMDBCLASSOUT;
10941  retain missFlag;
10942  set WORK.Impt2_DMDBCLASSOUT;
10943  by NAME;
10944  output;
10945  if first.name then missflag = 0;
10946  if (TYPE='C' and CRAW='') or (TYPE='N' and NRAW=.) then missflag = 1;
10947  if last.name and ^missFlag then do;
10948  if type = 'C' then do;
10949  LEVEL= '';
10950  CRAW = '';
10951  NRAW = .;
10952  end;
10953  else do;
10954  LEVEL='.';
10955  CRAW = '.';
10956  NRAW= .;
10957  end;
10958  FREQUENCY = 0;
10959  FREQPERCENT = 0;
10960  NMISSPERCENT = 0;
10961  output;
10962  end;
10963  run;
 
NOTE: There were 87 observations read from the data set WORK.IMPT2_DMDBCLASSOUT.
NOTE: The data set WORK.IMPT2_DMDBCLASSOUT has 92 observations and 10 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10964  data WORK.Impt2_MISS(KEEP=NAME NMISS PERCENTMISS);
10965  length NAME $32;
10966  set
10967  WORK.Impt2_DMDBCLASSOUT(rename=(freqpercent=PERCENTMISS frequency=NMISS) where=((TYPE='C' and CRAW='') or (TYPE='N' and NRAW=.)))
10968  WORK.IMPUTE_1W8RAXR_DMDBVAROUT
10969  ;
10970  if (NMISS ne . and N ne .) then PERCENTMISS = (NMISS/(NMISS+N))*100;
10971  run;
 
NOTE: There were 5 observations read from the data set WORK.IMPT2_DMDBCLASSOUT.
      WHERE ((TYPE='C') and (CRAW=' ')) or ((TYPE='N') and (NRAW=.));
NOTE: There were 12 observations read from the data set WORK.IMPUTE_1W8RAXR_DMDBVAROUT.
NOTE: The data set WORK.IMPT2_MISS has 17 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10972  proc sort data=WORK.M0KLZV0I NOTHREADS;
10973  by NAME;
10974  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
NOTE: The data set WORK.M0KLZV0I has 17 observations and 23 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10975  proc sort data=WORK.Impt2_MISS NOTHREADS;
10976  by NAME;
10977  run;
 
NOTE: There were 17 observations read from the data set WORK.IMPT2_MISS.
NOTE: The data set WORK.IMPT2_MISS has 17 observations and 3 variables.
NOTE: PROCEDURE SORT used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10978  data WORK.M0KLZV0I;
10979  merge WORK.M0KLZV0I WORK.Impt2_MISS(in=_b);
10980  by NAME;
10981  if _b then output;
10982  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
NOTE: There were 17 observations read from the data set WORK.IMPT2_MISS.
NOTE: The data set WORK.M0KLZV0I has 17 observations and 25 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10983  data WORK.M0KLZV0I;
10984  set WORK.M0KLZV0I;
10985  if 0<PERCENTMISS<50 and method ne 'NONE' then IMPUTE = 1;
10986  else IMPUTE = 0;
10987  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
NOTE: The data set WORK.M0KLZV0I has 17 observations and 26 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10988  proc dmdb data=WORK.M0KLZV0I outtable=WORK.NEWNAMES nameserver;
10989  names NAME;
10990  prefix M_ IMP_;
10991  where IMPUTE=1;
10992  run;
 
NOTE: There were 0 observations read from the data set WORK.M0KLZV0I.
      WHERE IMPUTE=1;
NOTE: The data set WORK.NEWNAMES has 0 observations and 3 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
10993  data WORK.M0KLZV0I;
10994  merge WORK.M0KLZV0I WORK.NEWNAMES;
10995  by NAME;
10996  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
NOTE: There were 0 observations read from the data set WORK.NEWNAMES.
NOTE: The data set WORK.M0KLZV0I has 17 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
10997  proc dmdb data=WORK.M0KLZV0I outtable=WORK.NEWNAMES nameserver;
10998  names NAME;
10999  prefix M_;
11000  where IMPUTE=0;
11001  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
      WHERE IMPUTE=0;
NOTE: The data set WORK.NEWNAMES has 17 observations and 2 variables.
NOTE: PROCEDURE DMDB used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11002  data WORK.M0KLZV0I;
11003  merge WORK.M0KLZV0I WORK.NEWNAMES;
11004  by NAME;
11005  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
NOTE: There were 17 observations read from the data set WORK.NEWNAMES.
NOTE: The data set WORK.M0KLZV0I has 17 observations and 28 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11006  data WORK.Impt2;
11007  run;
 
NOTE: The data set WORK.IMPT2 has 1 observations and 0 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
NOTE: View EMWS3.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
11008  data EMWS3.Impt2_META;
11009  set WORK.M0KLZV0I;
11010  VALUE = .;
11011  run;
 
NOTE: There were 17 observations read from the data set WORK.M0KLZV0I.
NOTE: The data set EMWS3.IMPT2_META has 17 observations and 29 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.01 seconds
 
 
11012  proc print data=EMWS3.Impt2_META(obs=500) label noobs;
11013  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel,          NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel,         NOQUOTE))" PERCENTMISS = "%sysfunc(sasmsg(sashelp.dmine, rpt_percentmissing_vlabel, NOQUOTE))";
11014  var NAME LABEL PERCENTMISS;
11015  where IMP eq '' and PERCENTMISS>50;
11016  title9 "%sysfunc(sasmsg(sashelp.dmine, rpt_rejectedsummary_title, NOQUOTE))";
11017  title10 "%sysfunc(sasmsg(sashelp.dmine, rpt_numberobs_title,         NOQUOTE))";
11018  run;
 
NOTE: No observations were selected from data set EMWS3.IMPT2_META.
NOTE: There were 0 observations read from the data set EMWS3.IMPT2_META.
      WHERE (IMP=' ') and (PERCENTMISS>50);
NOTE: PROCEDURE PRINT used (Total process time):
      real time           0.00 seconds
      cpu time            0.01 seconds
 
 
*------------------------------------------------------------*
* Score Log
Date:                May 12, 2019
Time:                00:01:54
*------------------------------------------------------------*
11120  data _null_;
11121  set EMWS3.Impt2_META end=eof;
11122  length string $34;
11123  retain missTotal;
11124  file #LN00148;
11125  if _n_=1 then misstotal = percentmiss;
11126  missTotal = percentmiss+misstotal;
11127  if IMP ne '' and METHOD ne 'NONE' then do;
11128  string = '"'!!strip(NAME)!!'"';
11129  put 'if NAME = ' string 'then delete;';
11130  put 'else ';
11131  string = '"'!!strip(IMP)!!'"';
11132  put 'if NAME    = ' string ' then do;';
11133  string = '"'!!strip(ROLE)!!'"';
11134  put '   ROLE    = ' string ';';
11135  string = '"'!!strip(FAMILY)!!'"';
11136  put '   FAMILY  = ' string ';';
11137  string = '"'!!strip(REPORT)!!'"';
11138  put '   REPORT  = ' string ';';
11139  string = '"'!!strip(LEVEL)!!'"';
11140  put '   LEVEL   = ' string ';';
11141  string = '"'!!strip(ORDER)!!'"';
11142  put '   ORDER   = ' string ';';
11143  put 'end;';
11144  end;
11145  if percentmiss>50 and ROLE ne 'TARGET' then do;
11146  string = '"'!!strip(NAME)!!'"';
11147  put 'if NAME = ' string ' then do;';
11148  put '   ROLE ="REJECTED";';
11149  put '   COMMENT = "Percent of missing exceeds 50%";';
11150  put 'end;';
11151  end;
11152  run;
 
NOTE: The file #LN00148 is:
      Filename=C:\JohnLaw\OneDrive\WQD Data Science\WQD7005\SASProject\projects\DataMining\Workspaces\EMWS3\Impt2\CDELTA_TRAIN.sas,
      RECFM=V,LRECL=32767,File Size (bytes)=0,
      Last Modified=12May2019:00:01:53,
      Create Time=11May2019:23:58:53
 
NOTE: 0 records were written to the file #LN00148.
NOTE: There were 17 observations read from the data set EMWS3.IMPT2_META.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
 
 
11153  filename emflow "C:\JohnLaw\OneDrive\WQD Data Science\WQD7005\SASProject\projects\DataMining\Workspaces\EMWS3\Impt2\EMFLOWSCORE.sas";
11154  *------------------------------------------------------------*;
11155  * Impt2: Scoring DATA data;
11156  *------------------------------------------------------------*;
11157  data EMWS3.Impt2_TRAIN
11158  / view=EMWS3.Impt2_TRAIN
11159  ;
11160  set EMWS3.Trans_TRAIN
11161  ;
11162  %inc emflow;
11166  run;
 
NOTE: DATA STEP view saved on file EMWS3.IMPT2_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS3.TRANS_TRAIN.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.06 seconds
      cpu time            0.06 seconds
 
 
11167  quit;
11168  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11169  filename emflow "C:\JohnLaw\OneDrive\WQD Data Science\WQD7005\SASProject\projects\DataMining\Workspaces\EMWS3\Impt2\EMFLOWSCORE.sas";
11170  *------------------------------------------------------------*;
11171  * Impt2: Scoring VALIDATE data;
11172  *------------------------------------------------------------*;
11173  data EMWS3.Impt2_VALIDATE
11174  / view=EMWS3.Impt2_VALIDATE
11175  ;
11176  set EMWS3.Trans_VALIDATE
11177  ;
11178  %inc emflow;
11182  run;
 
NOTE: DATA STEP view saved on file EMWS3.IMPT2_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS3.TRANS_VALIDATE.VIEW used (Total process time):
      real time           0.04 seconds
      cpu time            0.04 seconds
 
NOTE: DATA statement used (Total process time):
      real time           0.05 seconds
      cpu time            0.04 seconds
 
 
11183  quit;
11184  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.
 
11185  *------------------------------------------------------------*;
11186  * Impt2: Computing metadata for TRAIN data;
11187  *------------------------------------------------------------*;
 
NOTE: View EMWS3.IMPT2_TRAIN.VIEW used (Total process time):
      real time           0.08 seconds
      cpu time            0.07 seconds
 
NOTE: View EMWS3.IMPT2_TRAIN.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
NOTE: View EMWS3.IMPT2_VALIDATE.VIEW used (Total process time):
      real time           0.07 seconds
      cpu time            0.07 seconds
 
*------------------------------------------------------------*
* Report Log
Date:                May 12, 2019
Time:                00:01:55
*------------------------------------------------------------*
11548  %let _nimpute = 0;
11549  data EMWS3.Impt2_RESULT;
11550  label NAME = "%sysfunc(sasmsg(sashelp.dmine, meta_name_vlabel,        NOQUOTE))" METHOD = "%sysfunc(sasmsg(sashelp.dmine, rpt_imputemethod_vlabel, NOQUOTE))" IMPUTED = "%sysfunc(sasmsg(sashelp.dmine, rpt_imputedvar_vlabel,   NOQUOTE))" INDICATOR =
11551     "%sysfunc(sasmsg(sashelp.dmine, rpt_indicatorvar_vlabel, NOQUOTE))" VALUE = "%sysfunc(sasmsg(sashelp.dmine, rpt_imputevalue_vlabel,  NOQUOTE))" ROLE = "%sysfunc(sasmsg(sashelp.dmine, meta_role_vlabel,        NOQUOTE))" LEVEL =
11552     "%sysfunc(sasmsg(sashelp.dmine, meta_level_vlabel,       NOQUOTE))" LABEL = "%sysfunc(sasmsg(sashelp.dmine, meta_label_vlabel,       NOQUOTE))" TRAIN = "%sysfunc(sasmsg(sashelp.dmine, rpt_missingcount_vlabel, NOQUOTE, TRAIN))";
11553  set EMWS3.Impt2_META(where=(IMPUTED ne '') keep=NAME METHOD IMP VALUE ROLE NMISS LEVEL LABEL rename=(IMP=IMPUTED NMISS=TRAIN)) end=eof;
11554  if eof then call symput('_nimpute', '1');
11555  run;
 
NOTE: Variable INDICATOR is uninitialized.
NOTE: There were 0 observations read from the data set EMWS3.IMPT2_META.
      WHERE IMPUTED not = ' ';
NOTE: The data set EMWS3.IMPT2_RESULT has 0 observations and 8 variables.
NOTE: DATA statement used (Total process time):
      real time           0.02 seconds
      cpu time            0.03 seconds
 
 
